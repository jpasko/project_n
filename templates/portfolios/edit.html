g{% extends "portfolio_base.html" %}
{% block title %}{{ profile.fullname }} | Customize{% endblock %}
{% block header %}{% endblock %}
{% block script %}
<!--<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>-->
<script type="text/javascript" src="{{ STATIC_URL }}js/jscolor.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/csrf.js"></script>
<script>
$(function() {
  $("#id_background_color").addClass("color");
  $("#id_text_color").addClass("color");
  $("#id_text_color_hover").addClass("color");
  $("#id_page_width_display").val($("#id_page_width").val());
  $("#id_page_width").change(function() {
    $("#id_page_width_display").val($("#id_page_width").val());
  });
  $("#id_thumbnail_dimension_display").val($("#id_thumbnail_dimension").val());
  $("#id_thumbnail_dimension").change(function() {
    $("#id_thumbnail_dimension_display").val($("#id_thumbnail_dimension").val());
  });
  $('#id_picture').change(function() {
    $('#id_picture_styled').val($(this).val().replace("C:\\fakepath\\", ""));
  });
  $('#id_banner').change(function() {
    $('#id_banner_styled').val($(this).val().replace("C:\\fakepath\\", ""));
  });
  $("#full_width_navbar_radio").find(".btn").each(function() {
    $(this).bind("click", function() {
      $(this).addClass("btn-success active");
      $(this).removeClass("btn-default");
      $(this).siblings().addClass("btn-default");
      $(this).siblings().removeClass("btn-success active");
      $("#id_full_width_navbar").val($(this).val());
    });
  });
  $("#enable_banner_radio").find(".btn").each(function() {
    $(this).bind("click", function() {
      $(this).addClass("btn-success active");
      $(this).removeClass("btn-default");
      $(this).siblings().addClass("btn-default");
      $(this).siblings().removeClass("btn-success active");
      $("#id_enable_banner").val($(this).val());
    });
  });
});
</script>
{% endblock %}
{% block content %}
<style>
  textarea {
    width: 100%;
    height: 100px;
  }
  #id_fullname, #id_blog, #id_blog_name, #id_background_color, #id_text_color, #id_text_color_hover, #banner-img, #id_banner_styled, #id_ga_1, #id_ga_2, #id_copy_text {
    height: 30px;
  }
  #id_blog {
    width: 126px;
  }
  #id_blog_name {
    width: 80px;
  }
  .pretty_file_input {
    width: 206px;
  }
  #id_banner_styled, #banner-img {
    width: 122px;
  }
  #id_banner, #id_picture {
    display: none;
  }
  .form-errors {
    display: inline-block;
    border: 1px solid #ff4d42;
    border-radius: 5px;
    background: #ffe2d6;
    padding: 5px;
    color: #424242;
  }
  #id_page_width, #id_thumbnail_dimension {
    display: inline-block;
    width: 152px;
  }
  #id_page_width_display, #id_thumbnail_dimension_display {
    display: inline-block;
    width: 50px;
    height: 30px;
  }
  #id_ga_1 {
    display: inline-block;
    width: 120px;
  }
  #id_ga_2 {
    display: inline-block;
    width: 45px;
  }
  #id_copy_text {
    width: 193px;
  }
</style>

<form method="post" action="." enctype="multipart/form-data" class="form-horizontal muted">
  {% csrf_token %}

  <div class="row-fluid">
    <div class="span6">
      <h3 style="text-align: center">Title and Banner</h3>
      <div class="control-group">
	<label class="control-label" for="id_fullname">Portfolio title</label>
	<div class="controls">
	  {{ form.fullname.errors }}
	  {{ form.fullname }}
	</div>
      </div>

      <div class="control-group">
	<label class="control-label" for="id_banner">Banner image</label>
	<div class="controls">
	  {% if form.banner.errors %}
	  <p class="form-errors">Choose a valid image</p>
	  {% endif %}
	  <input type="file" name="banner" id="id_banner" class="hide" />
	  {% if profile.banner %}
	  <div class="pretty_file_input">
	    <img id="banner-img" src="{{ profile.banner.url }}" style="background: white">
	    <a class="btn btn-default" onclick="$('#id_banner').click();"><b>Change</b></a>
	  </div>
	  {% else %}
	  <div class="pretty_file_input">
	    <input id="id_banner_styled" type="text" onclick="$('#id_banner').click();" placeholder="None currently">
	    <a class="btn btn-default" onclick="$('#id_banner').click();"><b>Browse</b></a>
	  </div>
	  {% endif %}
	</div>
      </div>

      <div class="control-group">
	<label class="control-label" for="id_enable_banner">Show banner or title?</label>
	<div class="controls">
	  <input type="hidden" name="enable_banner" value="{{ profile.enable_banner }}" id="id_enable_banner" />
	  <div class="btn-group" data-toggle="buttons-radio" id="enable_banner_radio">
	    {% if profile.enable_banner %}
	    <button type="button" class="btn btn-success active" value="True" style="width: 103px"><strong>Banner</strong></button>
	    <button type="button" class="btn btn-default" style="width: 103px" value="False"><strong>Title</strong></button>
	    {% else %}
	    <button type="button" class="btn btn-default" value="True" style="width: 103px"><strong>Banner</strong></button>
	    <button type="button" class="btn btn-success active" style="width: 103px" value="False"><strong>Title</strong></button>
	    {% endif %}
	  </div>
	</div>
      </div>
    </div>

    <div class="span6">
      <h3 style="text-align: center">Dimensions</h3>
      <div class="control-group">
	<label class="control-label" for="id_page_width">Page width (pixels)</label>
	<div class="controls">
	  <input id="id_page_width" name="page_width" type="range" value="{{ profile.page_width }}" min="800" max="1200" />
	  <input id="id_page_width_display" type="text" value="" />
	</div>
      </div>

      <div class="control-group">
	<label class="control-label" for="id_thumbnail_dimension">Thumbnail width (pixels)</label>
	<div class="controls">
	  <input id="id_thumbnail_dimension" name="thumbnail_dimension" type="range" value="{{ profile.thumbnail_dimension }}" min="65" max="590" />
	  <input id="id_thumbnail_dimension_display" type="text" value="" />
	</div>
      </div>

      <div class="control-group">
	<label class="control-label" for="id_full_width_navbar">Navigation bar</label>
	<div class="controls">
	  <input type="hidden" name="full_width_navbar" value="{{ profile.full_width_navbar }}" id="id_full_width_navbar" />
	  <div class="btn-group" data-toggle="buttons-radio" id="full_width_navbar_radio">
	    {% if profile.full_width_navbar %}
	    <button type="button" class="btn btn-default" value="False"><b>Default</b></button>
	    <button type="button" class="btn btn-success active" style="width: 132px" value="True"><b>Full-width</b></button>
	    {% else %}
	    <button type="button" class="btn btn-success active" value="False"><b>Default</b></button>
	    <button type="button" class="btn btn-default" style="width: 132px" value="True"><b>Full-width</b></button>
	    {% endif %}
	  </div>
	</div>
      </div>

    </div>
  </div>
  <div class="row-fluid">
    <div class="span6">
      <h3 style="text-align: center">Color</h3>
      <div class="control-group">
	<label class="control-label" for="id_background_color">Background color</label>
	<div class="controls">
	  {{ form.background_color.errors }}
	  {{ form.background_color }}
	</div>
      </div>
      
      <div class="control-group">
	<label class="control-label" for="id_text_color">Text color</label>
	<div class="controls">
	  {{ form.text_color.errors }}
	  {{ form.text_color }}
	</div>
      </div>
      
      <div class="control-group">
	<label class="control-label" for="id_text_color_hover">Text hover color</label>
	<div class="controls">
	  {{ form.text_color_hover.errors }}
	  {{ form.text_color_hover }}
	</div>
      </div>

    </div>
    <div class="span6">
      <h3 style="text-align: center">Miscellaneous</h3>

      <div class="control-group">
	<label class="control-label" for="id_blog">Blog</label>
	<div class="controls">
	  {% if form.blog.errors %}
	  <p class="form-errors">Enter a valid URL</p>
	  {% endif %}
	  {{ form.blog }}
	  {{ form.blog_name }}
	  <!--<input type="text" placeholder="Name"/>-->
	</div>
      </div>

      <div class="control-group">
	<label class="control-label" for="id_copy_text">Copyright text</label>
	<div class="controls">
	  {% if form.copy_text.errors %}
	  <p class="form-errors">Invalid; try again</p>
	  {% endif %}
	  <b>&copy; </b>{{ form.copy_text }}
	</div>
      </div>

      <div class="control-group">
	<label class="control-label" for="id_ga">Google Analytics</label>
	<div class="controls">
	  {% if form.ga_1.errors or form.ga_2.errors %}
	  <p class="form-errors">Invalid value: integers only</p>
	  {% endif %}
	  <div class="google-analytics">
	    <b>UA-</b>
	    {% if profile.ga_1 %}
	    <input type="text" id="id_ga_1" name="ga_1" value="{{ profile.ga_1 }}" />
	    {% else %}
	    <input type="text" id="id_ga_1" name="ga_1" value="" />
	    {% endif %}
	    <b>-</b>
	    {% if profile.ga_2 %}
	    <input type="text" id="id_ga_2" name="ga_2" value="{{ profile.ga_2 }}" />
	    {% else %}
	    <input type="text" id="id_ga_2" name="ga_2" value="" />
	    {% endif %}
	  </div>
	</div>
      </div>
      
    </div>
  </div>
  <div class="row-fluid">
    <hr style="border-top: none; border-bottom: solid 1px rgba(150, 150, 150, .1)">
    <div class="span9 offset2">
      <div class="control-group">
	<div class="controls">
	  <input type="submit" value="Apply changes" class="btn-green btn-large">
	  <a class="btn-contact btn-link" href="/">Cancel</a>
	</div>
      </div>
    </div>
  </div>

</form>


{% endblock %}
