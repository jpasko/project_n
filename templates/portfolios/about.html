{% extends "portfolio_base.html" %}
{% block title %}{{ profile.fullname }} | About{% endblock %}
{% block head %}
<style>
  .pencil img {
    padding-left: 2px;
  }
  .pencil {
    text-decoration: none;
  }
  .pencil:hover {
    text-decoration: none;
  }
</style>
{% endblock %}
{% block script %}
{% if user.is_authenticated and user.username == username %}
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/csrf.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/confirm-delete.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/editor.js"></script>
<script>
$(document).ready(function(){
  $('.pencil').hover(function () {
    $(this).find('img').prop('src', '{{ STATIC_URL}}img/pencil.png');
  }, function () {
    $(this).find('img').prop('src', '{{ STATIC_URL}}img/pencil_dull.png');
  });

  $(".enable-about").on("click", function() {
    if (!$(this).hasClass("active")) {
      $(this).removeClass("btn-default");
      $(this).addClass("btn-success active");
      $(".disable-about").removeClass("btn-danger active");
      $(".disable-about").addClass("btn-default");

      $.ajax({
        type: "POST",
        url: "/toggle_about_page/",
        data: {'enable': 'True'}
      });
    }
  });

  $(".disable-about").on("click", function() {
    if (!$(this).hasClass("active")) {
      $(this).removeClass("btn-default");
      $(this).addClass("btn-danger active");
      $(".enable-about").removeClass("btn-success active");
      $(".enable-about").addClass("btn-default");

      $.ajax({
        type: "POST",
        url: "/toggle_about_page/",
        data: {'enable': 'False'}
      });
    }
  });
});
</script>
{% endif %}
{% endblock %}
{% block content %}
{% if user.is_authenticated and user.username == username %}
<div id="dialog" title="Are you sure?">
  <p>
    <span class="ui-icon ui-icon-alert"></span>
    This photo will be permanently deleted.</p>
</div>
<div class="alert alert-error hide" id="ajax-alert">
  <a class="close" data-dismiss="alert" href="#">&times;</a>
  <p></p>
</div>
{% endif %}
<div class="row muted">
  <div class="span7">
    {% if user.is_authenticated and username == user.username %}
    <div class="row" style="padding-bottom: 10px">
      <div class="span1">
	<p><b>Enable?</b></p>
      </div>
      <div class="span6">
	<div class="btn-group" data-toggle="buttons-radio" style="display: inline">
	  {% if profile.allow_about %}
	  <button type="button" class="btn btn-success enable-about active" value="True"><i class="icon-ok"></i></button>
	  <button type="button" class="btn btn-default disable-about" value="False"><i class="icon-remove"></i></button>
	  {% else %}
	  <button type="button" class="btn btn-default enable-about" value="True"><i class="icon-ok"></i></button>
	  <button type="button" class="btn btn-danger disable-about active" value="False"><i class="icon-remove"></i></button>
	  {% endif %}
	</div>
      </div>
    </div>
    {% endif %}

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" id="trigger-editable-about" href="#"><b>About</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.about %}
	<p><b>About</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	<div id="editable-about">
	  {% if profile.about %}
	  <p id="valid-about">{{ profile.about|linebreaksbr }}</p>
	  {% else %}
	  <p id="empty-about"><em>Currently empty</em></p>
	  {% endif %}
	  <textarea id="about-textarea" style="display: none; width: 100%"></textarea>
	</div>
	<button type="button" class="btn btn-success" id="save-about" style="display: none; margin-bottom: 10px">
	  <b>Save</b>
	</button>
	<button type="button" class="btn btn-default" id="cancel-about" style="display: none; margin-bottom: 10px">
	  <i class="icon-remove"></i>
	</button>
	{% elif profile.about %}
	<p>{{ profile.about|linebreaksbr }}</p>
	{% endif %}
      </div>
    </div>

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" id="trigger-editable-email" href="#"><b>Email</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.email %}
	<p><b>Email</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	<div id="editable-email">
	  {% if profile.email %}
	  <p id="valid-email">{{ profile.email }}</p>
	  {% else %}
	  <p id="empty-email"><em>Currently empty</em></p>
	  {% endif %}
	  <input id="email-input" type="text" style="display: none"></input>
	</div>
	<button type="button" class="btn btn-success" id="save-email" style="display: none; margin-bottom: 10px">
	  <b>Save</b>
	</button>
	<button type="button" class="btn btn-default" id="cancel-email" style="display: none; margin-bottom: 10px">
	  <i class="icon-remove"></i>
	</button>
	{% elif profile.email %}
	<a href="mailto:{{ profile.email }}" style="text-decoration: none">{{ profile.email }}</a>
	{% endif %}
      </div>
    </div>

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" id="trigger-editable-phone" href="#"><b>Phone</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.phone %}
	<p><b>Phone</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	<div id="editable-phone">
	  {% if profile.phone %}
	  <p id="valid-phone">{{ profile.phone }}</p>
	  {% else %}
	  <p id="empty-phone"><em>Currently empty</em></p>
	  {% endif %}
	  <input id="phone-input" type="text" style="display: none" maxlength="100"></input>
	</div>
	<button type="button" class="btn btn-success" id="save-phone" style="display: none; margin-bottom: 10px">
	  <b>Save</b>
	</button>
	<button type="button" class="btn btn-default" id="cancel-phone" style="display: none; margin-bottom: 10px">
	  <i class="icon-remove"></i>
	</button>
	{% elif profile.phone %}
	<p>{{ profile.phone }}</p>
	{% endif %}
      </div>
    </div>


    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" id="trigger-editable-location" href="#"><b>Location</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.location %}
	<p><b>Location</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	<div id="editable-location">
	  {% if profile.location %}
	  <p id="valid-location">{{ profile.location }}</p>
	  {% else %}
	  <p id="empty-location"><em>Currently empty</em></p>
	  {% endif %}
	  <input id="location-input" type="text" style="display: none" maxlength="100"></input>
	</div>
	<button type="button" class="btn btn-success" id="save-location" style="display: none; margin-bottom: 10px">
	  <b>Save</b>
	</button>
	<button type="button" class="btn btn-default" id="cancel-location" style="display: none; margin-bottom: 10px">
	  <i class="icon-remove"></i>
	</button>
	{% elif profile.location %}
	<p>{{ profile.location }}</p>
	{% endif %}
      </div>
    </div>

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" id="trigger-editable-website" href="#"><b>Website</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.website %}
	<p><b>Website</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	<div id="editable-website">
	  {% if profile.website %}
	  <a id="valid-website" href="{{ profile.website }}" target="_blank" style="text-decoration: none">{{ profile.website }}</a>
	  {% else %}
	  <p id="empty-website"><em>Currently empty</em></p>
	  {% endif %}
	  <input id="website-input" type="text" style="display: none" maxlength="500"></input>
	</div>
	<button type="button" class="btn btn-success" id="save-website" style="display: none; margin-bottom: 10px">
	  <b>Save</b>
	</button>
	<button type="button" class="btn btn-default" id="cancel-website" style="display: none; margin-bottom: 10px">
	  <i class="icon-remove"></i>
	</button>
	{% elif profile.website %}
	<a href="{{ profile.website }}" target="_blank" style="text-decoration: none">{{ profile.website }}</a>
	{% endif %}
      </div>
    </div>

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" id="trigger-editable-social" href="#"><b>Social</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	<span id="twitter-img" class="hide">{{ STATIC_URL }}img/twitter.png</span>
	<span id="facebook-img" class="hide">{{ STATIC_URL }}img/facebook.png</span>
	<span id="google_plus-img" class="hide">{{ STATIC_URL }}img/gplus.png</span>
	<span id="linkedin-img" class="hide">{{ STATIC_URL }}img/linkedin.png</span>
	<div id="editable-social">
	  {% if profile.twitter %}
	  <a id="valid-social-twitter" href="{{ profile.twitter }}" target="_blank" style="padding-right: 15px">
	    <img src="{{ STATIC_URL }}img/twitter.png">
	  </a>
	  {% endif %}
	  {% if profile.facebook %}
	  <a id="valid-social-facebook" href="{{ profile.facebook }}" target="_blank" style="padding-right: 15px">
	    <img src="{{ STATIC_URL }}img/facebook.png">
	  </a>
	  {% endif %}
	  {% if profile.google_plus %}
	  <a id="valid-social-google_plus" href="{{ profile.google_plus }}" target="_blank" style="padding-right: 15px">
	    <img src="{{ STATIC_URL }}img/gplus.png">
	  </a>
	  {% endif %}
	  {% if profile.linkedin %}
	  <a id="valid-social-linkedin" href="{{ profile.linkedin }}" target="_blank" style="padding-right: 15px">
	    <img src="{{ STATIC_URL }}img/linkedin.png">
	  </a>
	  {% endif %}
	  {% if not profile.twitter and not profile.facebook and not profile.google_plus and not profile.linkedin %}
	  <p id="empty-social"><em>Currently empty</em></p>
	  {% endif %}
	  <div class="hide" id="twitter-group">
	    <label for="twitter-input" class="control-label">Twitter</label>
	    <input id="twitter-input" type="text" maxlength="500"></input>
	  </div>

	  <div class="hide" id="facebook-group">
	    <label for="facebook-input" class="control-label">Facebook</label>
	    <input id="facebook-input" type="text" maxlength="500"></input>
	  </div>

	  <div class="hide" id="google_plus-group">
	    <label for="google_plus_input" class="control-label">Google+</label>
	    <input id="google_plus-input" type="text" maxlength="500"></input>
	  </div>

	  <div class="hide" id="linkedin-group">
	    <label for="linkedin-input" class="control-label">LinkedIn</label>
	    <input id="linkedin-input" type="text" maxlength="500"></input>
	  </div>
	</div>
	<button type="button" class="btn btn-success" id="save-social" style="display: none; margin-bottom: 10px">
	  <b>Save</b>
	</button>
	<button type="button" class="btn btn-default" id="cancel-social" style="display: none; margin-bottom: 10px">
	  <i class="icon-remove"></i>
	</button>
	{% else %}
	{% if profile.twitter %}
	<a href="{{ profile.twitter }}" target="_blank" style="padding-right: 15px"><img src="{{ STATIC_URL }}img/twitter.png"></a>
	{% endif %}
	{% if profile.facebook %}
	<a href="{{ profile.facebook }}" target="_blank" style="padding-right: 15px"><img src="{{ STATIC_URL }}img/facebook.png"></a>
	{% endif %}
	{% if profile.google_plus %}
	<a href="{{ profile.google_plus }}" target="_blank" style="padding-right: 15px"><img src="{{ STATIC_URL }}img/gplus.png"></a>
	{% endif %}
	{% if profile.linkedin %}
	<a href="{{ profile.linkedin }}" target="_blank" style="padding-right: 15px"><img src="{{ STATIC_URL }}img/linkedin.png"></a>
	{% endif %}
	{% endif %}
      </div>
    </div>
  </div>

  {% if user.is_authenticated and username == user.username %}
  <div class="span3" style="margin-bottom: 15px; float: right">
    <a href="/customize/" class="btn-green btn-green-link"><i class="icon-plus icon-white"></i>Profile picture</a>
    {% if profile.picture %}
    <a href="/about/delete_photo/" class="confirm btn btn-danger"><i class="icon-remove icon-white"></i></a>
    {% endif %}
  </div>
  {% endif %}

  {% if profile.picture %}
  <div class="span3" style="position: relative; left: 0; top: 0; float: right">
      <img src="{{ profile.picture.url }}">
  </div>
  {% endif %}
</div>
{% endblock %}
