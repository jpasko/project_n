{% extends "portfolio_base.html" %}
{% block title %}{{ profile.fullname }} | About{% endblock %}
{% block head %}
<style>
  .pencil img {
    padding-left: 2px;
  }
  .pencil {
    text-decoration: none;
  }
  .pencil:hover {
    text-decoration: none;
  }
</style>
{% endblock %}
{% block script %}
{% if user.is_authenticated and user.username == username %}
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/csrf.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/confirm-delete.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/editor.js"></script>
<script>
$(document).ready(function(){
  $('.pencil').hover(function () {
    $(this).find('img').prop('src', '{{ STATIC_URL}}img/pencil.png');
  }, function () {
    $(this).find('img').prop('src', '{{ STATIC_URL}}img/pencil_dull.png');
  });

  $(".enable-about").on("click", function() {
    if (!$(this).hasClass("active")) {
      $(this).removeClass("btn-default");
      $(this).addClass("btn-success active");
      $(".disable-about").removeClass("btn-danger active");
      $(".disable-about").addClass("btn-default");

      $.ajax({
        type: "POST",
        url: "/toggle_about_page/",
        data: {'enable': 'True'}
      });
    }
  });

  $(".disable-about").on("click", function() {
    if (!$(this).hasClass("active")) {
      $(this).removeClass("btn-default");
      $(this).addClass("btn-danger active");
      $(".enable-about").removeClass("btn-success active");
      $(".enable-about").addClass("btn-default");

      $.ajax({
        type: "POST",
        url: "/toggle_about_page/",
        data: {'enable': 'False'}
      });
    }
  });
});
</script>
{% endif %}
{% endblock %}
{% block content %}
{% if user.is_authenticated and user.username == username %}
<div id="dialog" title="Are you sure?">
  <p>
    <span class="ui-icon ui-icon-alert"></span>
    This photo will be permanently deleted.</p>
</div>
{% endif %}
<div class="row muted">
  <div class="span7">
    {% if user.is_authenticated and username == user.username %}
    <div class="row" style="padding-bottom: 10px">
      <div class="span1">
	<p><b>Enable?</b></p>
      </div>
      <div class="span6">
	<div class="btn-group" data-toggle="buttons-radio" style="display: inline">
	  {% if profile.allow_about %}
	  <button type="button" class="btn btn-success enable-about active" value="True"><i class="icon-ok"></i></button>
	  <button type="button" class="btn btn-default disable-about" value="False"><i class="icon-remove"></i></button>
	  {% else %}
	  <button type="button" class="btn btn-default enable-about" value="True"><i class="icon-ok"></i></button>
	  <button type="button" class="btn btn-danger disable-about active" value="False"><i class="icon-remove"></i></button>
	  {% endif %}
	</div>
      </div>
    </div>
    {% endif %}

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" id="trigger-editable-about" href="#"><b>About</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.about %}
	<p><b>About</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	<div id="editable-about">
	  {% if profile.about %}
	  <p id="valid-about">{{ profile.about|linebreaksbr }}</p>
	  {% else %}
	  <p id="empty-about"><em>Currently empty</em></p>
	  {% endif %}
	  <textarea id="about-textarea" style="display: none; width: 100%"></textarea>
	</div>
	<button type="button" class="btn btn-success" id="save-about" style="display: none; margin-top: 3px; margin-bottom: 5px">
	  <b>Save</b>
	</button>
	<button type="button" class="btn btn-default" id="cancel-about" style="display: none; margin-top: 3px; margin-bottom: 5px">
	  <i class="icon-remove"></i>
	</button>
	{% elif profile.about %}
	<p>{{ profile.about|linebreaksbr }}</p>
	{% endif %}
      </div>
    </div>

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" href="/edit/"><b>Email</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.email %}
	<p><b>Email</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	{% if profile.email %}
	<p>{{ profile.email }}</p>
	{% else %}
	<p><em>Currently empty</em></p>
	{% endif %}
	{% elif profile.email %}
	<p>{{ profile.email }}</p>
	{% endif %}
      </div>
    </div>

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" href="/edit/"><b>Phone</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.phone %}
	<p><b>Phone</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	{% if profile.phone %}
	<p>{{ profile.phone }}</p>
	{% else %}
	<p><em>Currently empty</em></p>
	{% endif %}
	{% elif profile.phone %}
	<p>{{ profile.phone }}</p>
	{% endif %}
      </div>
    </div>


    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" href="/edit/"><b>Location</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.location %}
	<p><b>Location</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	{% if profile.location %}
	<p>{{ profile.location }}</p>
	{% else %}
	<p><em>Currently empty</em></p>
	{% endif %}
	{% elif profile.location %}
	<p>{{ profile.location }}</p>
	{% endif %}
      </div>
    </div>

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" href="/edit/"><b>Website</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% elif profile.website %}
	<p><b>Website</b></p>
	{% endif %}
      </div>
      <div class="span6">
	{% if user.is_authenticated and username == user.username %}
	{% if profile.website %}
	<a href="{{ profile.website }}" target="_blank">{{ profile.website }}</a>
	{% else %}
	<p><em>Currently empty</em></p>
	{% endif %}
	{% elif profile.website %}
	<a href="{{ profile.website }}" target="_blank">{{ profile.website }}</a>
	{% endif %}
      </div>
    </div>

    <div class="row">
      <div class="span1">
	{% if user.is_authenticated and username == user.username %}
	<a class="pencil muted" href="/edit/"><b>Social</b><img src="{{ STATIC_URL }}img/pencil_dull.png"></a>
	{% endif %}
      </div>
      <div class="span6">
	{% if profile.twitter %}
	<a href="{{ profile.twitter }}" target="_blank" style="padding-right: 15px"><img src="{{ STATIC_URL }}img/twitter.png"></a>
	{% endif %}
	{% if profile.facebook %}
	<a href="{{ profile.facebook }}" target="_blank" style="padding-right: 15px"><img src="{{ STATIC_URL }}img/facebook.png"></a>
	{% endif %}
	{% if profile.google_plus %}
	<a href="{{ profile.google_plus }}" target="_blank" style="padding-right: 15px"><img src="{{ STATIC_URL }}img/gplus.png"></a>
	{% endif %}
	{% if profile.linkedin %}
	<a href="{{ profile.linkedin }}" target="_blank" style="padding-right: 15px"><img src="{{ STATIC_URL }}img/linkedin.png"></a>
	{% endif %}
	
	{% if user.is_authenticated and username == user.username %}
	{% if not profile.twitter and not profile.facebook and not profile.google_plus and not profile.linkedin %}
	<p><em>Currently empty</em></p>
	{% endif %}
	{% endif %}
      </div>
    </div>
  </div>

  {% if user.is_authenticated and username == user.username %}
  <div class="span3" style="margin-bottom: 15px">
    <a href="/customize/" class="btn-green btn-green-link"><i class="icon-plus icon-white"></i>Profile picture</a>
  </div>
  {% endif %}

  {% if profile.picture %}
  <div class="span3" style="position: relative; left: 0; top: 0;">
      <img src="{{ profile.picture.url }}">
      {% if user.is_authenticated and username == user.username %}
      <a href="/about/delete_photo/" class="confirm">
	<img src="{{ STATIC_URL }}img/delete.png" style="position: absolute; top: 0; left: 0">
      </a>
      {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}
