{% extends "portfolio_base.html" %}
{% block title %}{{ profile.fullname }} | Portfolio{% endblock %}
{% block script %}
{% if user.is_authenticated and user.username == username %}
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script src="/static/js/confirm-delete.js"></script>
<script type="text/javascript" src="/static/js/sorting.js"></script>
{% endif %}
{% endblock %}
{% block header %}{% endblock %}
{% block content %}
{% if user.is_authenticated and user.username == username %}
<div id="dialog" title="Are you sure?">
  <p>
    <span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>
    The gallery and all photos it contains will be permanently deleted.</p>
</div>
<div class="row">
  <div class="span1">
  </div>
  <div class="span3">
    <a href="/user/{{ username }}/create_gallery/" class="btn btn-large btn-success">Create a new gallery</a>
  </div>
</div>
{% endif %}
<div class="row">
  <div class="span1">
  </div>
  <div class="span10">
    <ul class="thumbnails" id="sortable">
      {% for gallery in galleries %}
      <li>
	<div style="position: relative; left: 0; top: 0;">
	  {% if gallery.count > 0 %}
	  <a href="/user/{{ username }}/gallery/{{ gallery.pk }}/">
	    {% with first_photo=gallery.photo_set.all|first %}
	    <img src="/{{ first_photo.thumbnail.url }}" style="position: relative; top: 0; left: 0;">
	    {% endwith %}
	  </a>
	  {% else %}
	  <a href="/user/{{ username }}/upload/"><img src="/static/img/empty_gallery.png"></a>
	  {% endif %}
	  {% if user.is_authenticated and username == user.username %}
	  <a href="http://google.com">
	    <a href="/user/{{ username }}/upload/">
	    <img src="/static/img/upload.png" style="position: absolute; top: 0; left: 0;"/>
	  </a>
	  <a href="/user/{{ username }}/gallery/{{ gallery.pk }}/delete/" class="confirm">
	    <img src="/static/img/delete.png" style="position: absolute; top: 0; right: 0;"/>
	  </a>
	  <a href="http://google.com">
	    <img src="/static/img/edit.png" style="position: absolute; bottom: 0; left: 0;"/>
	  </a>
	  {% endif %}
	</div>
	{% if gallery.count > 0 %}
        <p><b>{{ gallery.title }}</b></p>
	{% else %}
        <p><b>{{ gallery.title }}(empty)</b></p>
	{% endif %}
      </li>
      {% endfor %}
    </ul>
  </div>
  <div class="span1">
  </div>
</div>
{% endblock %}
